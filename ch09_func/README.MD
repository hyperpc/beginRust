# 第9章 定义函数

## 定义和调用函数

以关键字fn开始，后跟与该函数关联的名字与一对圆括号，然后就是一个花括号包围的代码块  
代码块为函数体，其之前的所有代码均为函数的签名  

变量必须先定义，然后使用；但是函数支持可用域内任意位置都可以调用  
同一作用域内，不允许重复声明同名函数  
内层作用域定义的函数，如果与外层作用域的函数同名，那么内层函数会屏蔽外层函数，并且编译器会给出警告  

函数的参数类型必须明确指定，但是编译器会是哦也能够类型推断检查实参的值是否类型匹配  

## 函数返回值

函数的返回值，即为函数体最后一个表达式的值，否则为空元组(未指定返回类型，或空函数体)  
函数签名后，函数体之前，用箭头和数据类型定义返回值，如：-> f64  
return语句可以显示地提前退出函数，不需要执行到函数体结束；单独的return语句，可用于为指定返回值的函数    

利用元组，枚举，结构，元组结构，数组或向量，可以返回多个值  

```rust
//合法返回值
fn f1() -> i32 {4.5; "abc"; 73i32}
fn f2() -> i32 {4.5; "abc"; 73}
fn f3() -> i32 {4.5; "abc"; 73+100}
//非法返回值
fn f1_1() -> i32 {4.5; "abc"; false}
fn f1_2() -> i32 {4.5; "abc"; ()}
fn f1_3() -> i32 {4.5; "abc"; {}}
fn f1_4() -> i32 {4.5; "abc"; }

//返回值的推荐写法
fn f_good(x:f64) ->f64 {
    if x<=0 { 0. }
    else { x+3. }
}
//一般写法
fn f_normal(x:f64) ->f64 {
    if x<=0 {return 0.;}
    x+3.
}
//不推荐写法
fn f_bad(x:f64) ->f64 {
    if x<=0 {return 0.;}
    return x+3.
}

fn divide(dividend:i32, divisor:i32) -> (i32, i32){
    (dividend/divisor, dividend%divisor);
}
println!("divide(50, 11)={:?}", divide(50, 11));
```

## 引用传递参数

一般通过参数传递进来的值，通过逻辑运算后，离开函数作用域，又会指向进入作用域时候的初始值  
如果传递的是引用地址，而不是值，则在函数作用域内的逻辑运算，会直接影响作用域外的值  

传递引用的参数以&mut修饰，函数体内的参数以*修饰  

“&”符号表示对象的(内存)地址  
“*”符号表示(内存)地址处的对象  
